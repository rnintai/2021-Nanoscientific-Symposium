<link rel="stylesheet"
  href="https://us.nanoscientific.org/wp-content/themes/oceanwp/assets/css/pages/exhibit_hall/spinner.css">
</link>
<!-- loading -->
<div class="load-wrap">
  <img src="https://asia.nanoscientific.org/wp-content/uploads/2021/07/asia_home_1_thumbnail.jpg"
    alt="loading-thumbnail">
  <div class="lds-ring">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
<!--  -->
<div class="home-wrap">
  <div class="video-wrap">
    <video id="video-1" class="lazy" poster="https://d25unujvh7ui3r.cloudfront.net/asia_home_1_thumbnail.jpg">
      <source data-src="https://d25unujvh7ui3r.cloudfront.net/Asia_Home01.mp4" type="video/mp4">
    </video>
    <video id="video-2" class="lazy" loop>
      <source data-src="https://d25unujvh7ui3r.cloudfront.net/home_2.webm" type="video/webm">
      <source data-src="https://d25unujvh7ui3r.cloudfront.net/home_2.mp4" type="video/mp4">
    </video>
  </div>
  <div class="video-overlay"></div>
  <div class="text-wrap">
    <span class="head">Join us for the 2021 NanoScientific Symposium Asia </span><br />
    <span class="head">October 28, 2021 </span><br />
    <div class="btn-wrap">
      <button class="btn-go active">Go!</button>
    </div>
    <p class="desc d-1">
      &nbsp;NanoScientific Symposium Asia is an annual event

    </p>
    <p class="desc d-2">for nanoscience researchers and scientists to learn about
    </p>
    <p class="desc d-2">the latest studies being formed using SPM.
    </p>
  </div>
  <div class="skip-btn-wrap">
    <button class="skip-btn">Skip</button>
  </div>
  <div class="btns-wrap">
    <!-- Image Map Generated by http://www.image-map.net/ -->
    <!-- <div class="map"> -->
    <img src="https://d25unujvh7ui3r.cloudfront.net/home_2_thumbnail.jpg" class="home-thumb" usemap="#image-map" />
    <!-- </div> -->
    <map name="image-map" id="image-map">
      <area target="" alt="play-map" title="play-map" class="play" href="#" coords="739,288,1189,495" shape="rect"
        onmouseover="areaHover(this)" onmouseout="areaLeave(this)" />
      <area target="" alt="program-map" title="program-map" class="program" href="/programs" coords="218,508,502,691"
        shape="rect" onmouseover="areaHover(this);" onmouseout="areaLeave(this);" data-name="Click Here" />
      <area target="" alt="lecture-map" title="lecture-map" class="lecture" href="/lecture-hall"
        coords="727,478,1202,701" shape="rect" onmouseover="areaHover(this);" onmouseout="areaLeave(this);"
        data-name="Click Here" />
      <area target="" alt="exhibit-map" title="exhibit-map" class="exhibit" href="/exhibit-hall"
        coords="1419,511,1697,689" shape="rect" onmouseover="areaHover(this);" onmouseout="areaLeave(this);"
        data-name="Click Here" />
    </map>
  </div>

</div>
<style>
  * {
    font-family: "Open Sans", sans-serif;
  }

  body,
  p {
    margin: 0;
    overflow: hidden;
  }

  a {
    text-decoration: none;
    color: #000;
  }

  .nav-section {
    position: fixed;
    z-index: 99;
    opacity: 0.7;
    width: 1920px;
    height: 66px;
    background-color: #e7e8e9;
  }

  button {
    border-style: none;
    background-color: transparent;
    cursor: pointer;
    padding: 0;
  }

  .home-wrap {
    position: relative;
    height: 100vh;
  }

  .logo-wrap {
    display: inline-block;
    position: absolute;
    left: 2%;
    top: 13%;
    width: 32%;
    z-index: 2;
  }

  .video-wrap {
    height: 100%;
  }

  .video-overlay {
    position: absolute;
    display: inline-block;
    width: 100%;
    height: 100%;
    top: 0;
    background-color: #000;
    opacity: 0.15;
  }

  .home-1-thumb {
    position: absolute;
    top: -6%;
    width: 100%;
    height: 110%;

    -o-object-fit: fill;
    object-fit: fill;
    /* -o-object-position: center top;
    object-position: center top; */
  }

  #video-1 {
    visibility: visible;
    position: absolute;
    top: 0%;
    width: 100%;
    height: 100%;
    -o-object-fit: fill;
    object-fit: fill;
    /* -o-object-position: center top;
    object-position: center top; */
    opacity: 1;
    /* transition: opacity 0.7s, visibility 0.7s; */
  }

  #video-2 {
    visibility: hidden;
    position: absolute;
    left: 0%;
    top: 0%;
    width: 100%;
    height: 100%;
    -o-object-fit: fill;
    object-fit: fill;
    /* transition: opacity 0.7s, visibility 0.7s; */
  }

  .video-wrap.active #video-1 {
    visibility: hidden;
  }

  .video-wrap.active #video-2 {
    opacity: 1;
    visibility: visible;
  }

  .text-wrap {
    padding-top: 0px;
    padding-bottom: 2%;
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translate(-50%, -100%);
    width: 100%;
    background: linear-gradient(0deg, black, transparent);
  }

  .head,
  .desc {
    color: #fff;
    text-shadow: #000 1px 0 5px;
    margin: 0 auto;
  }

  .head {
    display: inline-block;
    position: relative;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    font-size: 1.7vw;
    margin-bottom: 9px;
    font-weight: 700;
    background-color: #000;
    padding: 0 15px 0 15px;
  }

  .desc {
    width: 63%;
    font-size: 1vw;
    text-align: center;
    line-height: 1.5;
  }

  .d-1 {
    margin-bottom: 3px;
  }

  .btn-wrap {
    display: block;
    margin: 5px 0 10px 0;
  }

  .btn-go {
    position: relative;
    left: 50%;
    transform: translateX(-50%);
    background-color: #1f94d4;
    padding: 8px 20px;
    color: #fff;
    opacity: 0.8;
    cursor: pointer;
    font-size: 17px;
  }

  .btn-go:hover {
    opacity: 1;
    transition: opacity 0.3s ease;
  }

  /* hide */
  .home-wrap.hide .logo-wrap,
  .home-wrap.hide .video-overlay,
  .home-wrap.hide .text-wrap {
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.5s ease, visibility 0.5s ease;
  }

  .home-wrap.hide .home-1-thumb {
    display: none
  }

  /* skip btn */
  .skip-btn-wrap {
    position: absolute;
    top: 90%;
    left: 93%;
    transform: translate(-50%, -50%);
    background-color: #1f94d4;
    padding: 8px 20px;
    color: #fff;
    opacity: 0;
    cursor: pointer;
    font-size: 17px;
    border-radius: 3px;
    visibility: hidden;
    transition: opacity 1s ease, visibility 1s;
  }

  .skip-btn {
    color: #fff;
    font-size: 28px;
  }

  .skip-btn-wrap.active {
    opacity: 0.6;
    visibility: visible;
  }

  /* buttons after video */
  #image-map area {
    z-index: 10;
  }

  .btns-wrap {
    visibility: hidden;
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
  }

  .home-thumb {
    position: relative;
    /* top: -9%; */
    width: 100%;
    height: 110% !important;
    opacity: 0;
    object-fit: fill;
  }

  .btns-wrap.active {
    visibility: visible;
    /* z-index: 10; */
  }

  /* .map {
    width: 100%;
    height: 100%;
  } */

  /* style of each buttons */
  .play-btn {
    position: absolute;
    top: 46.5%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0.35;
    transition: opacity 0.3s ease;
  }

  .play-btn:hover {
    opacity: 1;
  }

  .btns-wrap.active .play-btn {
    visibility: visible;
  }

  .far.fa-play-circle {
    font-size: 2.2vw;
    text-shadow: 2px 2px 3px #000;
  }

  .program-title,
  .lecture-title,
  .exhibit-title {
    width: 91px;
    opacity: 0.45;
    transform: translate(-50%, -50%);
    /* transition: all 0.5s ease-in-out; */
  }

  .program-title {
    top: 36%;
    left: 50%;
  }

  .lecture-title {
    top: 36%;
    left: 50%;
  }

  .exhibit-title {
    top: 35%;
    left: 45%;
  }


  /* button hover */
  .map-title {
    position: absolute;
  }

  .map-wrap {
    z-index: 0;
    visibility: hidden;
    transition-property: left, top, width, height;
    transition-duration: 0.2s, 0.2s, 0.2s, 0.2s;
    transition-timing-function: ease, ease, ease, ease;
  }

  .play-map-wrap.hover .play-btn {
    opacity: 1;
  }

  .play-map-title {
    display: none;
  }

  .btns-wrap.active .program-title,
  .btns-wrap.active .lecture-title,
  .btns-wrap.active .exhibit-title {
    visibility: visible;
    position: absolute;
    font-size: 0.95vw;
    font-weight: 700;
    text-align: center;
    text-shadow: 2px 2px 4px #979797;
    /* transition: color 0.5s ease-in-out, left 1s ease-in-out, top 1s ease-in-out,
      width 1s ease-in-out, height 1s ease-in-out; */
    /* transition: all 0.5s ease-in-out; */
  }

  .program-title:hover,
  .lecture-title:hover,
  .exhibit-title:hover {
    color: #000;
    opacity: 1;
  }

  .program-map-wrap.hover .program-title,
  .lecture-map-wrap.hover .lecture-title,
  .exhibit-map-wrap.hover .exhibit-title {
    color: #000;
    opacity: 1;
  }

  .load-wrap {
    display: none;
  }

  .load-wrap img {
    filter: none;
  }
</style>
<script>
  var ctrlVideo_1 = document.querySelector("#video-1");
  var ctrlVideo_2 = document.querySelector("#video-2");
  var btn_go = document.querySelector(".btn-go");
  var btn_skip = document.querySelector(".skip-btn");

  document.addEventListener("DOMContentLoaded", function () {
    var lazyVideos = [].slice.call(document.querySelectorAll("video.lazy"));

    lazyVideos.forEach(function (video) {
      for (var i = 0; i < video.children.length; i++) {
        var source = video.children[i].getAttribute("data-src")
        video.children[i].src = source;
      }
      video.load();
      video.classList.remove("lazy");
    })
  });

  function enableSpinner() {
    jQuery(".load-wrap").css("display", "inline-block");
  }
  function disableSpinner() {
    jQuery(".load-wrap").css("display", "none");
    ctrlVideo_1.play();
  }

  btn_go.addEventListener("click", (event) => {
    if (ctrlVideo_1.readyState === 4) {

    }
    else {
      enableSpinner();
      var imageLoaded = 0;
      var total_cnt = jQuery("video").length;
      jQuery("video").each(function () {
        jQuery(this)[0].oncanplaythrough = function () {
          imageLoaded++;
          if (imageLoaded === total_cnt && jQuery(this)[0].networkState === 1) {
            disableSpinner();
          }
        }
      });
    }
    ctrlVideo_1.play();
    document.querySelector(".home-wrap").classList.add("hide");
    document.querySelector(".skip-btn-wrap").classList.add("active");
  });

  btn_skip.addEventListener("click", (event) => {
    document.querySelector(".video-wrap").classList.add("active");
    document.querySelector(".skip-btn-wrap").classList.remove("active");
    ctrlVideo_1.currentTime = ctrlVideo_1.duration;
  });

  ctrlVideo_1.addEventListener("ended", (event) => {
    document.querySelector(".video-wrap").classList.add("active");
    ctrlVideo_2.play();
    document.querySelector(".btns-wrap").classList.add("active");
    document.querySelector(".skip-btn-wrap").classList.remove("active");
  });

  function areaHover(element) {
    var name = element.className;
    var btn_name = name.concat("", "-map-wrap");
    document.querySelector(`.${btn_name}`).classList.add("hover");
  }
  function areaLeave(element) {
    var name = element.className;
    var btn_name = name.concat("", "-map-wrap");
    document.querySelector(`.${btn_name}`).classList.remove("hover");
  }

  var left_coor = [];
  var top_coor = [];
  var width = [];
  var height = [];

  jQuery("area").each(function () {
    var class_name = jQuery(this).attr("class");
    var href = jQuery(this).attr("href");
    var txt = jQuery(this).data("name");
    var coor = jQuery(this).attr("coords");
    var coorA = coor.split(",");
    var left = coorA[0];
    var top = coorA[1];
    var width = coorA[2] - coorA[0];
    var height = coorA[3] - coorA[1];

    var $a = jQuery(`<a class=${class_name}-title href=${href}>${txt}</a>`);
    var $div = jQuery(
      `<div class="${class_name}-map-wrap map-wrap"></div>`
    );
    $div.offset({
      left: left + "px",
      top: top + "px",
    });
    $div.width(width + "px");
    $div.height(height + "px");
    $div.css({
      position: "absolute"
    });

    $div.appendTo("#image-map");
    if (class_name !== "play-map") {
      $a.appendTo(`.${class_name}-map-wrap`);
    }
  });

  var $play_btn = jQuery(
    `<button class="play-btn"><i class="far fa-play-circle"></i></button>`
  );
  $play_btn.appendTo(".play-map-wrap");

  var left_coor = [];
  var top_coor = [];
  var width = [];
  var height = [];

  var timer = null;

  jQuery(window).resize(function () {
    clearTimeout(timer);

    timer = setTimeout(function () {
      setSize();
    }, 200);
  });

  function setSize() {
    var i = 0;
    jQuery("area").each(function () {
      var class_name = jQuery(this).attr("class");
      var href = jQuery(this).attr("href");
      var txt = jQuery(this).data("name");
      var coor = jQuery(this).attr("coords");
      var coorA = coor.split(",");
      left_coor[i] = coorA[0];
      top_coor[i] = coorA[1];
      width[i] = coorA[2] - coorA[0];
      height[i] = coorA[3] - coorA[1];
      i = i + 1;
    });
    var i = 0;
    jQuery(".map-wrap").each(function () {
      // console.log(left_coor[i] + ", " + top_coor[i]);
      // console.log(jQuery(this));
      jQuery(this).offset({
        left: left_coor[i],
        top: top_coor[i],
      });
      jQuery(this).width(width[i] + "px");
      jQuery(this).height(height[i] + "px");
      i = i + 1;
    });
  }
</script>