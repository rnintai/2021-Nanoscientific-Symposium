var aw = window.screen.availWidth,
	ah = window.screen.availHeight,
	ow = document.querySelector("body").clientWidth,
	oh = document.querySelector("body").clientHeight;
!(function (t) {
	t.fn.rwdImageMaps = function () {
		var e = this;
		return (
			t(window)
				.resize(function () {
					e.each(function () {
						if (void 0 !== t(this).attr("usemap")) {
							var e = t(this);
							t("<img />")
								.on("load", function () {
									var r = t("body").width(),
										a = t("body").height(),
										i = e.attr("width"),
										n = e.attr("height");
									if (!i || !n) {
										var o = new Image();
										(o.src = e.attr("src")),
											i || (i = o.width),
											n || (n = o.height);
									}
									var h = e.width() / 100,
										c = e.height() / 100,
										d = e.attr("usemap").replace("#", ""),
										s = "coords",
										w = r - i,
										u = a - n;
									t('map[name="' + d + '"]')
										.find("area")
										.each(function () {
											var e = t(this);
											e.data(s) || e.data(s, e.attr(s));
											for (
												var r = e.data(s).split(","),
													a = new Array(r.length),
													o = 0;
												o < a.length;
												++o
											)
												o % 2 == 0
													? (a[o] =
															aw < ow
																? parseInt(
																		(r[o] /
																			i) *
																			100 *
																			h
																  )
																: parseInt(
																		r[o]
																  ) +
																  w / 2)
													: (aw < ow &&
															(a[o] = parseInt(
																(r[o] / n) *
																	100 *
																	c
															)),
													  (a[o] =
															parseInt(r[o]) +
															u / 2));
											e.attr(s, a.toString());
										}),
										(ow =
											document.querySelector(
												"body"
											).clientWidth),
										(oh =
											document.querySelector(
												"body"
											).clientHeight);
								})
								.attr("src", e.attr("src"));
						}
					});
				})
				.trigger("resize"),
			this
		);
	};
})(jQuery);
